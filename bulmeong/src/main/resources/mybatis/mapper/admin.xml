<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gdu.bulmeong.admin.mapper.AdminMapper">

	<select id="selectAllUser" parameterType="Map" resultType="UsersDTO">
		SELECT USERS_NO, ID, NICKNAME, PW, NAME, MOBILE, GENDER, BIRTH_YEAR, BIRTH_DAY, POSTCODE, ROAD_ADDRESS, JIBUN_ADDRESS, DETAIL_ADDRESS, EXTRA_ADDRESS, JOIN_DATE, AGREE_CODE, SNS_TYPE, SESSION_ID, SESSION_LIMIT_DATE, EMAIL, AGE, PROFILE_IMAGE, PW_MODIFY_DATE, INFO_MODIFY_DATE
		  FROM USERS
	</select>
	
	<select id="selectAllCampAdmin" parameterType="Map" resultType="CampDTO">
	 	SELECT A.ROW_NUM, A.CAMP_NO, A.facltNm, A.intro, A.lineIntro, A.featureNm, A.sbrsCl, A.firstImageUrl, A.themaEnvrnCl, A.eqpmnLendCl, A.tourEraCl, A.induty, A.allar, A.operPdCl, A.hvofBgnde, A.hvofEnddle, A.prmisnDe, A.operDeCl, A.toiletCo, A.extshrCo, A.brazierCl, A.glampInnerFclty, A.caravInnerFclty, A.lctCl, A.addr1, A.doNm, A.sigunguNm, A.addr2, A.zipcode, A.mapX, A.mapY, A.homepage, A.tel, A.createdtime, A.modifiedtime, A.jjim, A.sum
	 	  FROM (SELECT ROW_NUMBER() OVER(ORDER BY CAMP_NO <!-- ORDER BY "modifiedtime" DESC -->) AS ROW_NUM, CAMP_NO, facltNm, intro, lineIntro, featureNm, sbrsCl, firstImageUrl, themaEnvrnCl, eqpmnLendCl, tourEraCl, induty, allar, operPdCl, hvofBgnde, hvofEnddle, prmisnDe, operDeCl, toiletCo, extshrCo, brazierCl, glampInnerFclty, caravInnerFclty, lctCl, addr1, doNm, sigunguNm, addr2, zipcode, mapX, mapY, homepage, tel, createdtime, modifiedtime, jjim, sum 
	 	          FROM CAMP) A
	 	 LIMIT #{begin}, #{end}
	 </select>
	
	<select id="selectAllTentCount" resultType="int">
		SELECT COUNT(*)
		  FROM CAMP_TENT
	</select>
	
	<select id="selectAllTentAdmin" parameterType="Map" resultType="AdminTentDTO">
		SELECT CCT.ROW_NUM, CCT.CAMP_NO, CCT.facltNm, CCT.TENT_NO, CCT.TENT_CATEGORY, CCT.TENT_NAME, CCT.TENT_MAX_COUNT, CCT.TENT_RESERVE_DAY, CCT.TENT_SUM, CCT.TENT_STATE, CCT.TENT_IMAGE
  		  FROM (SELECT ROW_NUMBER() OVER(ORDER BY C.CAMP_NO, CT.TENT_NO) AS ROW_NUM, C.CAMP_NO, C.facltNm, CT.TENT_NO, CT.TENT_CATEGORY, CT.TENT_NAME, CT.TENT_MAX_COUNT, CT.TENT_RESERVE_DAY, CT.TENT_SUM, CT.TENT_STATE, CT.TENT_IMAGE
                  FROM CAMP AS C JOIN CAMP_TENT CT
		            ON C.CAMP_NO = CT.CAMP_NO) CCT
         LIMIT #{begin}, #{end}
	</select>
	
	<select id="selectCampcampNofacltNm" resultType="CampDTO">
		SELECT CAMP_NO, facltNm
		  FROM CAMP
	</select>
	
	<insert id="insertTent" parameterType="AdminTentDTO">
		INSERT INTO CAMP_TENT
			(CAMP_NO, TENT_CATEGORY, TENT_NAME, TENT_MAX_COUNT, TENT_RESERVE_DAY, TENT_SUM, TENT_STATE, TENT_IMAGE, TENT_ORIGIN)
		VALUES
    		(#{campNo}, #{tentCategory}, #{tentName}, #{tentMaxCount}, NULL, #{tentSum}, 0, #{tentImage}, #{tentOrigin});
	</insert>
	
	<select id="selectTentByTentNo" parameterType="int" resultType="AdminTentDTO">
		SELECT CAMP_NO, TENT_NO, TENT_CATEGORY, TENT_NAME, TENT_MAX_COUNT, TENT_SUM, TENT_STATE, TENT_IMAGE, TENT_ORIGIN
		  FROM CAMP_TENT
		 WHERE TENT_NO = #{tentNo}
	</select>
	
	<update id="updateTentByTentNo" parameterType="AdminTentDTO">
		UPDATE CAMP_TENT
		   SET TENT_CATEGORY = #{tentCategory}, TENT_NAME = #{tentName}, TENT_MAX_COUNT = #{tentMaxCount}, TENT_SUM = #{tentSum}, TENT_IMAGE = #{tentImage}, TENT_ORIGIN = #{tentOrigin}
		 WHERE TENT_NO = #{tentNo}
	</update>
	
	<delete id="deleteTentByTentNo" parameterType="int">
		DELETE 
		  FROM CAMP_TENT
		 WHERE TENT_NO = #{tentNo}
	</delete>
	
	
	
</mapper>