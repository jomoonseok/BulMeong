<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gdu.bulmeong.camp.mapper.CampMapper">

	<insert id="insertCampApi" parameterType="CampDTO">
		INSERT INTO CAMP
			(facltNm, intro, lineIntro, featureNm, sbrsCl, firstImageUrl, themaEnvrnCl, eqpmnLendCl, tourEraCl, induty, allar, operPdCl, hvofBgnde, hvofEnddle, prmisnDe, operDeCl, toiletCo, extshrCo, brazierCl, glampInnerFclty, caravInnerFclty, lctCl, addr1, doNm, sigunguNm, addr2, zipcode, mapX, mapY, homepage, tel, createdtime, modifiedtime)
		VALUES
			(#{facltNm}, #{intro}, #{lineIntro}, #{featureNm}, #{sbrsCl}, #{firstImageUrl}, #{themaEnvrnCl}, #{eqpmnLendCl}, #{tourEraCl}, #{induty}, #{allar}, #{operPdCl}, #{hvofBgnde}, #{hvofEnddle}, #{prmisnDe}, #{operDeCl}, #{toiletCo}, #{extshrCo}, #{brazierCl}, #{glampInnerFclty}, #{caravInnerFclty}, #{lctCl}, #{addr1}, #{doNm}, #{sigunguNm}, #{addr2}, #{zipcode}, #{mapX}, #{mapY}, #{homepage}, #{tel}, #{createdtime}, #{modifiedtime})
	</insert>
	
	 <delete id="deleteCampApi">
	 	DELETE 
	 	  FROM CAMP
	 	 WHERE 1=1
	 </delete>
	 
	 <select id="selectCampCount" resultType="int">
	 	SELECT COUNT(*)
	 	  FROM CAMP
	 </select>
	 
	 <select id="selectAllCamp" parameterType="Map" resultType="CampDTO">
	 	SELECT A.ROW_NUM, A.CAMP_NO, A.facltNm, A.intro, A.lineIntro, A.featureNm, A.sbrsCl, A.firstImageUrl, A.themaEnvrnCl, A.eqpmnLendCl, A.tourEraCl, A.induty, A.allar, A.operPdCl, A.hvofBgnde, A.hvofEnddle, A.prmisnDe, A.operDeCl, A.toiletCo, A.extshrCo, A.brazierCl, A.glampInnerFclty, A.caravInnerFclty, A.lctCl, A.addr1, A.doNm, A.sigunguNm, A.addr2, A.zipcode, A.mapX, A.mapY, A.homepage, A.tel, A.createdtime, A.modifiedtime, A.jjim, A.sum
	 	  FROM (SELECT ROW_NUMBER() OVER(ORDER BY CAMP_NO <!-- ORDER BY "modifiedtime" DESC -->) AS ROW_NUM, CAMP_NO, facltNm, intro, lineIntro, featureNm, sbrsCl, firstImageUrl, themaEnvrnCl, eqpmnLendCl, tourEraCl, induty, allar, operPdCl, hvofBgnde, hvofEnddle, prmisnDe, operDeCl, toiletCo, extshrCo, brazierCl, glampInnerFclty, caravInnerFclty, lctCl, addr1, doNm, sigunguNm, addr2, zipcode, mapX, mapY, homepage, tel, createdtime, modifiedtime, jjim, sum 
	 	          FROM CAMP) A
	 	 LIMIT #{begin}, #{end}
	 </select>
	 
	 <select id="selectCampByOption" parameterType="Map" resultType="CampDTO">
		SELECT CAMP_NO, facltNm, intro, lineIntro, featureNm, sbrsCl, firstImageUrl, themaEnvrnCl, eqpmnLendCl, tourEraCl, induty, allar, operPdCl, hvofBgnde, hvofEnddle, prmisnDe, operDeCl, toiletCo, extshrCo, brazierCl, glampInnerFclty, caravInnerFclty, lctCl, addr1, doNm, sigunguNm, addr2, zipcode, mapX, mapY, homepage, tel, createdtime, modifiedtime, jjim, sum 
		  FROM CAMP
		<where>
		    <if test="query != null">
		        facltNm LIKE CONCAT('%', #{query}, '%') 
		    </if>
	 	    <if test="doNm != null">
		        AND doNm LIKE CONCAT('%', #{doNm}, '%')
		    </if>
		    <if test="induty != null">
		        AND induty LIKE CONCAT('%', #{induty}, '%')
		    </if>
		    <if test="themaEnvrnCl != null">
		        AND themaEnvrnCl LIKE CONCAT('%', #{themaEnvrnCl}, '%')
		    </if>
	    </where>
	 </select>
	 
	 <select id="selectCampByNo" parameterType="int" resultType="CampDTO">  
	 	SELECT CAMP_NO, facltNm, intro, lineIntro, featureNm, sbrsCl, firstImageUrl, themaEnvrnCl, eqpmnLendCl, tourEraCl, induty, allar, operPdCl, hvofBgnde, hvofEnddle, prmisnDe, operDeCl, toiletCo, extshrCo, brazierCl, glampInnerFclty, caravInnerFclty, lctCl, addr1, doNm, sigunguNm, addr2, zipcode, mapX, mapY, homepage, tel, createdtime, modifiedtime, jjim, sum 
	 	  FROM CAMP
	 	 WHERE CAMP_NO = #{campNo}
	 </select>
	 
</mapper>