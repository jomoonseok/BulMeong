<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header::head('BulMeong')}"></head>
<body>

	<header th:replace="~{layout/header::header_layout}"></header>
	
	<!-- 로그인이 안 된 상태 -->
	<div th:if="${session.loginUser == null}">
		<a th:href="@{/users/agree}">회원가입</a>
		<a th:href="@{/users/login/form}">로그인</a>
	</div>
	
	<!-- 로그인이 된 상태 -->
	<div th:if="${session.loginUser != null}">
		<div style="border:solid 1px black; width:300px; text-align:center">
			<a th:href="@{/users/profile}"><img th:src=${session.loginUser.profileImage} width="38px" style="border:1px solid black;"></a>
			<span th:text="|${session.loginUser.nickname}님 반갑습니다.|"></span>
			<br>
			<br>
			<a th:href="@{/users/logout}">로그아웃</a>
		</div>
	</div>
	
	
	
</head>
	


	<!-- 홈화면 -->
    <!-- Swiper -->
    <div class="swiper-overflow-container" style="width:70%">
		<div class="swiper_html">
    		<div class="swiper_body">
    			<div class="swiper-container mySwiper">
    			<hr><div>여행테마별 캠핑장</div>
       			<div class="swiper-wrapper"></div>
      			<div class="swiper-pagination"></div>
    			</div>
   			</div>
		</div>
	</div>
    
 	 <!-- Initialize Swiper -->
  	<script>
  		function fn_swiper() {
  			var swiper = new Swiper('.mySwiper', {
  	      		slidesPerView: 3,
  	      		slidesPerColumn: 2,
  	      		spaceBetween: 30,
  	      		slidesOffsetBefore: 20,
  	      	  	slidesOffsetAfter: 20,
  	      		pagination: {
  	        		el: '.swiper-pagination',
  	        		clickable: true,
  	      		},
  	    	});
  		}
    	
    	
  	</script>
  	<!-- 캠핑장 리스트 -->
  	<script>
  		
  		$.ajax({
  			type: 'get',
  			url: '/camp/listIndex',
  			success: function(resData) {
  				/* var rand = [];
  				for(let i=0; i < 10; i++) {
	  				rand.push( Math.floor(((Math.random() * resData.camp.length) + 1)) );
  				}
  				var set = new Set(rand);
  				var uniqueRand = [...rand]; */
  				
  				$.each(resData.camp, function(i, camp) {
  					if(camp.themaEnvrnCl != '') {
		  				var div = '<div class="swiper-slide">';
	  					div += '<div><img src ="' + camp.firstImageUrl + '" style="height:50px; width:50px"><img><div>';
	  					div += '<div style="font-size:4px">' + camp.facltNm + '<div>';
	  					if(!camp.themaEnvrnCl.startsWith(',')) {
		  					div += '<div style="font-size:4px">' + '#' + camp.themaEnvrnCl.replaceAll(',',' #'); + '<div>';
	  					} 
	  					
		  				$('.swiper-wrapper').append(div);
		  				
  					}
  				})
  				fn_swiper();
  			}
  		})
  		
  	</script>

	
	
</body>
</html>